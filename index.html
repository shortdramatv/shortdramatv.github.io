<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drama TV</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{background:#0f0f0f;color:#fff;transition: background 0.3s, color 0.3s}

/* HEADER */
.header{
 position:fixed;top:0;width:100%;
 display:flex;align-items:center;
 background:#0f0f0f;
 padding:12px;border-bottom:1px solid #222;
 z-index:1000;
}

.menu-btn{font-size:24px;background:none;border:none;color:#fff;margin-right:12px;cursor:pointer}
.logo{font-size:22px;font-weight:bold;cursor:pointer}
.logo span{color:#ff0000}

/* ‡§π‡•á‡§°‡§∞ ‡§¨‡§ü‡§®‡•ç‡§∏ */
.header-buttons {
    margin-left: auto;
    display: flex;
    gap: 10px;
    align-items: center;
}

.share-btn,
.refresh-btn{
 font-size:20px;background:none;border:none;
 color:#fff;cursor:pointer;
 padding: 5px;
 border-radius: 5px;
}

/* CHANNEL POPUP */
#channelPopup{
 position:fixed;top:0;left:-100%;
 width:100%;height:100%;
 background:#0f0f0f;
 z-index:2000;
 transition:.3s;
 overflow-y:auto
}

#channelPopup.active{left:0}
.popup-header{
 display:flex;align-items:center;
 padding:15px;border-bottom:1px solid #222
}

.popup-header button{
 font-size:22px;background:none;border:none;color:#fff;margin-right:10px;cursor:pointer
}

.channel-item{
 display:flex;align-items:center;
 padding:15px;border-bottom:1px solid #222;
 cursor:pointer
}

.channel-item img{
 width:50px;height:50px;border-radius:50%;
 margin-right:25px
}

/* MAIN CONTAINER */
.main-container {
 margin-top: 70px;
 padding: 0;
}

.video-feed {
 display: grid;
 grid-template-columns: 1fr;
 gap: 15px;
}

@media (max-width: 767px) {
 .video-card { margin: 0 0 15px 0; border-radius: 0; }
 .thumbnail { border-radius: 0; }
}

/* VIDEO CARD */
.video-card {
 background-color: #1a1a1a;
 border-radius: 8px;
 overflow: hidden;
 cursor: pointer;
}

.thumbnail { width:100%; aspect-ratio:16/9; object-fit: contain; }

.info{ display:flex; padding: 8px 10px; align-items: flex-start; }
.channel-icon{ width:36px; height:36px; border-radius:50%; margin-right:8px; flex-shrink: 0; }
.text{flex:1}
.title{ font-size:14px; font-weight:500; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.meta{ font-size:11px; color:#aaa; }

/* PLAYER */
#player{ position:fixed; inset:0; background:#000; display:none; flex-direction:column; z-index:3000 }
.player-header{ display:flex; align-items:center; padding:12px; background:#000; }
.back-btn{ font-size:24px; background:none; border:none; color:#fff; margin-right:10px; cursor:pointer; }
video{ width:100%; max-height:55vh; }
.actions{ display:flex; justify-content:space-around; padding:10px; border-top:1px solid #222; }
.actions button{ background:none; border:none; color:#fff; cursor:pointer; }
.comments{ padding:10px; border-top:1px solid #222; }
.comments input{ width:100%; padding:10px; background:#222; border:none; color:#fff; border-radius:6px; }

/* LOADING */
.loading { text-align: center; padding: 40px; color: #aaa; font-size: 18px; display: none; }
.loading.active { display: block; }
</style>
</head>

<body>

<header class="header">
<button class="menu-btn" onclick="openChannels()">‚ò∞</button>
<div class="logo" onclick="showAll()">Drama <span>TV</span></div>
<div class="header-buttons">
    <button class="share-btn" onclick="shareApp()" title="Share App">üì§</button>
    <button class="refresh-btn" onclick="refreshHome()">‚Üª</button>
</div>
</header>

<div id="channelPopup">
 <div class="popup-header">
  <button onclick="closeChannels()">‚Üê</button>
  <div>All Channels</div>
 </div>
 <div id="channelList"></div>
</div>

<div class="main-container">
 <div class="video-feed" id="feed"></div>
 <div class="loading" id="loading">Loading videos...</div>
</div>

<div id="player">
 <div class="player-header">
  <button class="back-btn" onclick="closePlayer()">‚õå</button>
  <div id="playerTitle"></div>
 </div>

 <video id="video" controls autoplay playsinline controlsList="nodownload" disablePictureInPicture oncontextmenu="return false"></video>

 <div class="actions">
  <button onclick="like()">üíõ <span id="likes">0</span></button>
  <div>üëÅÔ∏è <span id="views">0</span></div>
 </div>

 <div class="comments">
  <input placeholder="Add a comment‚Ä¶" onkeydown="addComment(event)">
  <div id="commentList"></div>
 </div>
</div>

<script>
const videos = [
 {
  id: 5,
  title: "‡§ó‡§∞‡•Ä‡§¨ ‡§Ø‡•Å‡§µ‡§ï ‡§ñ‡§∞‡•ç‡§ö ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ú‡§æ‡§ó‡•É‡§§, ‡§∏‡•Å‡§Ç‡§¶‡§∞‡•Ä ‡§ï‡•ã ‡§™‡•à‡§∏‡•á ‡§¶‡•á‡§ï‡§∞ 90 ‡§π‡§ú‡§æ‡§∞ ‡§ï‡§∞‡•ã‡§°‡§º ‡§®‡§ï‡§¶, ‡§Ö‡§∞‡§¨‡§™‡§§‡§ø ‡§¨‡§®‡§ï‡§∞ ‡§™‡§≤‡§ü‡§µ‡§æ‡§∞!",
  videoUrl: "https://huggingface.co/datasets/shortdramatv/chinesedramavideo/resolve/main/5.mp4",
  thumbnail: "https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/5.jpg",
  channel: "‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ú‡§æ‡§ó‡•É‡§§",
  icon: "https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/sj.png",
 },
 {
  id: 4,
  title: "‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§®‡•á ‡§™‡§æ‡§≤‡§§‡•Ç ‡§¨‡•á‡§ü‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•Å‡§ù‡•á ‡§ú‡•á‡§≤ ‡§≠‡•á‡§ú‡§æ, ‡§Ö‡§∞‡§¨‡§™‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§∞‡•ç‡§ú‡§®‡•ç‡§Æ ‡§≤‡§ø‡§Ø‡§æ, ‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§§‡•ã‡§°‡§º‡§ï‡§∞ ‡§ï‡§°‡§º‡§æ ‡§¨‡§¶‡§≤‡§æ ‡§≤‡•Ç‡§Ç‡§ó‡§æ!",
  videoUrl: "https://huggingface.co/datasets/shortdramatv/chinesedramavideo/resolve/main/4.mp4",
  thumbnail: "https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/4.jpg",
  channel: "‡§™‡•Å‡§®‡§∞‡•ç‡§ú‡§®‡•ç‡§Æ",
  icon: "https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/pj.png",
 },
 {
  id: 7,
  title: "‡§§‡•Ä‡§® ‡§≠‡§æ‡§à ‡§™‡§æ‡§≤‡§§‡•Ç ‡§¨‡•á‡§ü‡•Ä ‡§∏‡•á ‡§™‡•ç‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§§‡•á ‡§π‡•Å‡§è ‡§Æ‡•Å‡§ù‡•á ‡§Æ‡§æ‡§∞ ‡§¶‡§ø‡§è, ‡§™‡•Å‡§®‡§∞‡•ç‡§ú‡§®‡•ç‡§Æ, ‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§§‡•ã‡§°‡§º‡§æ, ‡§ï‡§°‡§º‡§æ ‡§¨‡§¶‡§≤‡§æ ‡§≤‡•Ç‡§Ç‡§ó‡§æ!",
  videoUrl: "https://huggingface.co/datasets/shortdramatv/chinesedramavideo/resolve/main/3.mp4",
  thumbnail: "https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/3.jpg",
  channel: "‡§™‡•Å‡§®‡§∞‡•ç‡§ú‡§®‡•ç‡§Æ",
  icon: "https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/pj.png",
 },
 {
  id: 2,
  title: "‡§Ö‡§®‡§™‡§∏‡§Ç‡§¶ ‡§¨‡•á‡§ü‡•Ä ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§∞‡•ç‡§ú‡§®‡•ç‡§Æ ‡§≤‡§ø‡§Ø‡§æ, ‡§¶‡•Å‡§∑‡•ç‡§ü ‡§™‡§ø‡§§‡§æ ‡§µ ‡§™‡§æ‡§≤‡§§‡•Ç ‡§¨‡•á‡§ü‡•Ä ‡§ï‡•ã ‡§â‡§ú‡§æ‡§ó‡§∞ ‡§ï‡§ø‡§Ø‡§æ",
  videoUrl: "https://huggingface.co/datasets/shortdramatv/chinesedramavideo/resolve/main/2.mp4",
  thumbnail: "https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/2.jpg",
  channel: "‡§™‡•Å‡§®‡§∞‡•ç‡§ú‡§®‡•ç‡§Æ",
  icon: "https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/pj.png",
 },
];

const feed = document.getElementById("feed");
const player = document.getElementById("player");
const videoEl = document.getElementById("video");
const viewsEl = document.getElementById("views");
const likesEl = document.getElementById("likes");
const commentList = document.getElementById("commentList");
const loading = document.getElementById("loading");
let current = null;
let hasViewed = {};

/* MOBILE SHARE LOGIC */
async function shareApp() {
    const shareData = {
        title: 'Drama TV',
        text: '‡§¶‡•á‡§ñ‡§ø‡§è ‡§¨‡•á‡§π‡§§‡§∞‡•Ä‡§® ‡§°‡•ç‡§∞‡§æ‡§Æ‡§æ ‡§∏‡•Ä‡§∞‡•Ä‡§ú Drama TV ‡§™‡§∞‡•§ ‡§Ö‡§≠‡•Ä ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç!',
        url: 'https://play.google.com/store/apps/details?id=com.nadeemgs.dramatv'
    };

    try {
        // ‡§Ø‡§π ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ï‡§æ ‡§ì‡§∞‡§ø‡§ú‡§ø‡§®‡§≤ ‡§∂‡•á‡§Ø‡§∞‡§ø‡§Ç‡§ó ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§ñ‡•ã‡§≤‡•á‡§ó‡§æ
        if (navigator.share) {
            await navigator.share(shareData);
        } else {
            // ‡§Ö‡§ó‡§∞ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§∂‡•á‡§Ø‡§∞ ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ (‡§ú‡•à‡§∏‡•á ‡§™‡•Å‡§∞‡§æ‡§®‡•á ‡§°‡•á‡§∏‡•ç‡§ï‡§ü‡•â‡§™ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞)
            window.open(shareData.url, '_blank');
        }
    } catch (err) {
        console.log('Error sharing: ' + err);
    }
}

/* STORAGE & RENDER FUNCTIONS */
function store(id) { return JSON.parse(localStorage.getItem("v_" + id)) || {views: 0, likes: 0, comments: []}; }
function save(id, data) { localStorage.setItem("v_" + id, JSON.stringify(data)); }

function render(list = videos) {
 feed.innerHTML = "";
 loading.classList.add('active');
 setTimeout(() => {
  list.forEach(v => {
   const s = store(v.id);
   const div = document.createElement("div");
   div.className = "video-card";
   div.innerHTML = `
    <img src="${v.thumbnail}" class="thumbnail" onclick="openVideo(${v.id})">
    <div class="info">
     <img src="${v.icon}" class="channel-icon">
     <div class="text">
      <div class="title">${v.title}</div>
      <div class="meta" id="vmeta-${v.id}">${v.channel} ‚Ä¢ ${s.views} views</div>
     </div>
    </div>`;
   feed.appendChild(div);
  });
  loading.classList.remove('active');
 }, 500);
}

function openVideo(id) {
 current = videos.find(v => v.id === id);
 let s = store(current.id);
 viewsEl.innerText = s.views;
 likesEl.innerText = s.likes;
 document.getElementById("playerTitle").innerText = current.title;
 videoEl.src = current.videoUrl;
 
 videoEl.onplay = function() {
  if (!hasViewed[current.id]) {
   let s = store(current.id);
   s.views++;
   save(current.id, s);
   viewsEl.innerText = s.views;
   hasViewed[current.id] = true;
   const metaEl = document.getElementById("vmeta-" + current.id);
   if (metaEl) metaEl.innerText = `${current.channel} ‚Ä¢ ${s.views} views`;
  }
 };
 
 renderComments();
 player.style.display = "flex";
 document.body.style.overflow = "hidden";
}

function closePlayer() {
 videoEl.pause();
 videoEl.src = "";
 player.style.display = "none";
 document.body.style.overflow = "auto";
}

function like() {
 let s = store(current.id);
 s.likes++;
 save(current.id, s);
 likesEl.innerText = s.likes;
}

function renderComments() {
 commentList.innerHTML = "";
 const comments = store(current.id).comments;
 comments.forEach(c => {
  const d = document.createElement("div");
  d.className = "comment";
  d.innerText = c;
  commentList.appendChild(d);
 });
}

function addComment(e) {
 if (e.key === "Enter" && e.target.value.trim()) {
  let s = store(current.id);
  s.comments.push(e.target.value);
  save(current.id, s);
  e.target.value = "";
  renderComments();
 }
}

function openChannels() { document.getElementById("channelPopup").classList.add("active"); }
function closeChannels() { document.getElementById("channelPopup").classList.remove("active"); }

const channelContainer = document.getElementById("channelList");
const uniqueChannels = [...new Set(videos.map(v => v.channel))];
uniqueChannels.forEach(name => {
 const v = videos.find(x => x.channel === name);
 const d = document.createElement("div");
 d.className = "channel-item";
 d.innerHTML = `<img src="${v.icon}"><div>${name}</div>`;
 d.onclick = () => { render(videos.filter(x => x.channel === name)); closeChannels(); };
 channelContainer.appendChild(d);
});

function showAll() { render(videos); }
function refreshHome() { location.reload(); }

window.addEventListener('DOMContentLoaded', () => render(videos));
</script>
</body>
</html>
